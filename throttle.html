<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <div id="content" style="height:150px;background-color:#ccc;"></div>
    <script>
        /**
         *节流函数概念函数节流是指一定时间内执行的操作只执行一次，也就是说即预先设定一个执行周期，当调用动作的时刻大于等于执行周期则执行该动作，然后进入下一个新周期，一个比较形象的例子是如果将水龙头拧紧直到水是以水滴的形式流出，那你会发现每隔一段时间，就会有一滴水流出。
         * 目的：防抖和节流都是为了减少触发JS 的频率
         *总结：指定单位时间内频繁触发，只响应第一次，如果单位时间内再次触发，时间小于间隔时间不触发
         */
        let contentId = document.getElementById('content');

        function throttle(func, time, isFirst) {
            var prevTime = null;
            if (isFirst) {
                prevTime = 0;
            } else {
                prevTime = Date.now()
            }
            return function () {
                var nowTime = Date.now();
                var context = this;
                var args = arguments;
                if (nowTime - prevTime >= time) {
                    func.apply(context, args)
                    prevTime = Date.now();
                }
            }
        }

        function changeColor() {
            var r = Math.floor(Math.random() * 256)
            var g = Math.floor(Math.random() * 256)
            var b = Math.floor(Math.random() * 256)
            var rgb = '(' + r + ',' + g + ',' + b + ')'
            contentId.style.backgroundColor = 'rgb' + rgb;

        }
        contentId.onmousemove = throttle(changeColor, 2000)
    </script>
</body>

</html>